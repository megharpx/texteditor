{"ast":null,"code":"import _createClass from\"/Users/meghanharper/texteditor/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/Users/meghanharper/texteditor/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";// Import methods to save and get data from the indexedDB database in './database.js'\nimport{getDb,putDb}from'./database';import{header}from'./header';var _default=/*#__PURE__*/_createClass(function _default(){var _this=this;_classCallCheck(this,_default);var localData=localStorage.getItem('content');// check if CodeMirror is loaded\nif(typeof CodeMirror==='undefined'){throw new Error('CodeMirror is not loaded');}this.editor=CodeMirror(document.querySelector('#main'),{value:'',mode:'javascript',theme:'monokai',lineNumbers:true,lineWrapping:true,autofocus:true,indentUnit:2,tabSize:2});// When the editor is ready, set the value to whatever is stored in indexeddb.\n// Fall back to localStorage if nothing is stored in indexeddb, and if neither is available, set the value to header.\ngetDb().then(function(data){console.info('Loaded data from IndexedDB, injecting into editor');_this.editor.setValue(data||localData||header);});this.editor.on('change',function(){localStorage.setItem('content',_this.editor.getValue());});// Save the content of the editor when the editor itself is loses focus\nthis.editor.on('blur',function(){console.log('The editor has lost focus');putDb(localStorage.getItem('content'));});});export{_default as default};","map":{"version":3,"names":["getDb","putDb","header","localData","localStorage","getItem","CodeMirror","Error","editor","document","querySelector","value","mode","theme","lineNumbers","lineWrapping","autofocus","indentUnit","tabSize","then","data","console","info","setValue","on","setItem","getValue","log"],"sources":["/Users/meghanharper/texteditor/src/js/editor.js"],"sourcesContent":["// Import methods to save and get data from the indexedDB database in './database.js'\nimport { getDb, putDb } from './database';\nimport { header } from './header';\n\nexport default class {\n  constructor() {\n    const localData = localStorage.getItem('content');\n\n    // check if CodeMirror is loaded\n    if (typeof CodeMirror === 'undefined') {\n      throw new Error('CodeMirror is not loaded');\n    }\n\n    this.editor = CodeMirror(document.querySelector('#main'), {\n      value: '',\n      mode: 'javascript',\n      theme: 'monokai',\n      lineNumbers: true,\n      lineWrapping: true,\n      autofocus: true,\n      indentUnit: 2,\n      tabSize: 2,\n    });\n\n    // When the editor is ready, set the value to whatever is stored in indexeddb.\n    // Fall back to localStorage if nothing is stored in indexeddb, and if neither is available, set the value to header.\n    getDb().then((data) => {\n      console.info('Loaded data from IndexedDB, injecting into editor');\n      this.editor.setValue(data || localData || header);\n    });\n\n    this.editor.on('change', () => {\n      localStorage.setItem('content', this.editor.getValue());\n    });\n\n    // Save the content of the editor when the editor itself is loses focus\n    this.editor.on('blur', () => {\n      console.log('The editor has lost focus');\n      putDb(localStorage.getItem('content'));\n    });\n  }\n}\n"],"mappings":"sOAAA;AACA,OAASA,KAAK,CAAEC,KAAK,KAAQ,YAAY,CACzC,OAASC,MAAM,KAAQ,UAAU,CAAC,uCAGhC,mBAAc,+CACZ,GAAMC,UAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAEjD;AACA,GAAI,MAAOC,WAAU,GAAK,WAAW,CAAE,CACrC,KAAM,IAAIC,MAAK,CAAC,0BAA0B,CAAC,CAC7C,CAEA,IAAI,CAACC,MAAM,CAAGF,UAAU,CAACG,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CAAE,CACxDC,KAAK,CAAE,EAAE,CACTC,IAAI,CAAE,YAAY,CAClBC,KAAK,CAAE,SAAS,CAChBC,WAAW,CAAE,IAAI,CACjBC,YAAY,CAAE,IAAI,CAClBC,SAAS,CAAE,IAAI,CACfC,UAAU,CAAE,CAAC,CACbC,OAAO,CAAE,CACX,CAAC,CAAC,CAEF;AACA;AACAlB,KAAK,EAAE,CAACmB,IAAI,CAAC,SAACC,IAAI,CAAK,CACrBC,OAAO,CAACC,IAAI,CAAC,mDAAmD,CAAC,CACjE,KAAI,CAACd,MAAM,CAACe,QAAQ,CAACH,IAAI,EAAIjB,SAAS,EAAID,MAAM,CAAC,CACnD,CAAC,CAAC,CAEF,IAAI,CAACM,MAAM,CAACgB,EAAE,CAAC,QAAQ,CAAE,UAAM,CAC7BpB,YAAY,CAACqB,OAAO,CAAC,SAAS,CAAE,KAAI,CAACjB,MAAM,CAACkB,QAAQ,EAAE,CAAC,CACzD,CAAC,CAAC,CAEF;AACA,IAAI,CAAClB,MAAM,CAACgB,EAAE,CAAC,MAAM,CAAE,UAAM,CAC3BH,OAAO,CAACM,GAAG,CAAC,2BAA2B,CAAC,CACxC1B,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC,CACxC,CAAC,CAAC,CACJ,CAAC"},"metadata":{},"sourceType":"module"}