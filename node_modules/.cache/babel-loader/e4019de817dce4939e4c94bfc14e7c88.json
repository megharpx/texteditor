{"ast":null,"code":"// Import methods to save and get data from the indexedDB database in './database.js'\nimport { getDb, putDb } from './database';\nimport { header } from './header';\nexport default class {\n  constructor() {\n    const localData = localStorage.getItem('content');\n\n    // check if CodeMirror is loaded\n    if (typeof CodeMirror === 'undefined') {\n      throw new Error('CodeMirror is not loaded');\n    }\n    this.editor = CodeMirror(document.querySelector('#main'), {\n      value: '',\n      mode: 'javascript',\n      theme: 'monokai',\n      lineNumbers: true,\n      lineWrapping: true,\n      autofocus: true,\n      indentUnit: 2,\n      tabSize: 2\n    });\n\n    // When the editor is ready, set the value to whatever is stored in indexeddb.\n    // Fall back to localStorage if nothing is stored in indexeddb, and if neither is available, set the value to header.\n    getDb().then(data => {\n      console.info('Loaded data from IndexedDB, injecting into editor');\n      this.editor.setValue(data || localData || header);\n    });\n    this.editor.on('change', () => {\n      localStorage.setItem('content', this.editor.getValue());\n    });\n\n    // Save the content of the editor when the editor itself is loses focus\n    this.editor.on('blur', () => {\n      console.log('The editor has lost focus');\n      putDb(localStorage.getItem('content'));\n    });\n  }\n}","map":{"version":3,"names":["getDb","putDb","header","constructor","localData","localStorage","getItem","CodeMirror","Error","editor","document","querySelector","value","mode","theme","lineNumbers","lineWrapping","autofocus","indentUnit","tabSize","then","data","console","info","setValue","on","setItem","getValue","log"],"sources":["/Users/meghanharper/texteditor/src/js/editor.js"],"sourcesContent":["// Import methods to save and get data from the indexedDB database in './database.js'\nimport { getDb, putDb } from './database';\nimport { header } from './header';\n\nexport default class {\n  constructor() {\n    const localData = localStorage.getItem('content');\n\n    // check if CodeMirror is loaded\n    if (typeof CodeMirror === 'undefined') {\n      throw new Error('CodeMirror is not loaded');\n    }\n\n    this.editor = CodeMirror(document.querySelector('#main'), {\n      value: '',\n      mode: 'javascript',\n      theme: 'monokai',\n      lineNumbers: true,\n      lineWrapping: true,\n      autofocus: true,\n      indentUnit: 2,\n      tabSize: 2,\n    });\n\n    // When the editor is ready, set the value to whatever is stored in indexeddb.\n    // Fall back to localStorage if nothing is stored in indexeddb, and if neither is available, set the value to header.\n    getDb().then((data) => {\n      console.info('Loaded data from IndexedDB, injecting into editor');\n      this.editor.setValue(data || localData || header);\n    });\n\n    this.editor.on('change', () => {\n      localStorage.setItem('content', this.editor.getValue());\n    });\n\n    // Save the content of the editor when the editor itself is loses focus\n    this.editor.on('blur', () => {\n      console.log('The editor has lost focus');\n      putDb(localStorage.getItem('content'));\n    });\n  }\n}\n"],"mappings":"AAAA;AACA,SAASA,KAAK,EAAEC,KAAK,QAAQ,YAAY;AACzC,SAASC,MAAM,QAAQ,UAAU;AAEjC,eAAe,MAAM;EACnBC,WAAW,GAAG;IACZ,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC;;IAEjD;IACA,IAAI,OAAOC,UAAU,KAAK,WAAW,EAAE;MACrC,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;IAC7C;IAEA,IAAI,CAACC,MAAM,GAAGF,UAAU,CAACG,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,EAAE;MACxDC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,YAAY;MAClBC,KAAK,EAAE,SAAS;MAChBC,WAAW,EAAE,IAAI;MACjBC,YAAY,EAAE,IAAI;MAClBC,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE,CAAC;MACbC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;IACA;IACAnB,KAAK,EAAE,CAACoB,IAAI,CAAEC,IAAI,IAAK;MACrBC,OAAO,CAACC,IAAI,CAAC,mDAAmD,CAAC;MACjE,IAAI,CAACd,MAAM,CAACe,QAAQ,CAACH,IAAI,IAAIjB,SAAS,IAAIF,MAAM,CAAC;IACnD,CAAC,CAAC;IAEF,IAAI,CAACO,MAAM,CAACgB,EAAE,CAAC,QAAQ,EAAE,MAAM;MAC7BpB,YAAY,CAACqB,OAAO,CAAC,SAAS,EAAE,IAAI,CAACjB,MAAM,CAACkB,QAAQ,EAAE,CAAC;IACzD,CAAC,CAAC;;IAEF;IACA,IAAI,CAAClB,MAAM,CAACgB,EAAE,CAAC,MAAM,EAAE,MAAM;MAC3BH,OAAO,CAACM,GAAG,CAAC,2BAA2B,CAAC;MACxC3B,KAAK,CAACI,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAC;IACxC,CAAC,CAAC;EACJ;AACF"},"metadata":{},"sourceType":"module"}